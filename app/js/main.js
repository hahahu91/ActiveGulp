!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=340,a=340,r=a/9,o=i<a?i/3:a/3;e.CANVAS_WIDTH=i,e.CANVAS_HEIGHT=a,e.ANIMATION_DURATION=1e3,e.ANIMATE_DY=r,e.RADIUS_CHART=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.closeDescription=e.showDescription=e.getItemRect=e.inDeg=e.inRad=e.mouseCoordinates=e.arctg360=void 0;var i=n(0);e.arctg360=function(t,e){return e>=0&&t>=0?180*Math.atan(e/t)/Math.PI:e>=0&&t<0||e<0&&t<0?180+180*Math.atan(e/t)/Math.PI:360+180*Math.atan(e/t)/Math.PI},e.mouseCoordinates=function(t,e){var n=t.getBoundingClientRect(),a=e.pageX-t.offsetLeft-n.left,r=e.pageY-t.offsetTop;return{x:a-i.CANVAS_WIDTH/2,y:r-i.CANVAS_HEIGHT/2}},e.inRad=function(t){return t*Math.PI/180},e.inDeg=function(t){return 180*t/Math.PI},e.getItemRect=function(t,e,n){var a=2*Math.PI*(t.value/n),r=i.CANVAS_WIDTH/2,o=(e+e+a)/2,s=t._animation.currentAnimation,u=i.RADIUS_CHART+10+s;return{rad:a,cx:r+u*Math.cos(o),cy:r+u*Math.sin(o),x:r+s*Math.cos(o),y:r+s*Math.sin(o)}},e.showDescription=function(t){var e=document.getElementById("decription"),n=document.getElementsByClassName("title")[0],i=document.getElementsByClassName("about_item")[0],a=t.getColor();e.classList.contains("active")?(e.classList.add("hidden"),setTimeout(function(){e.classList.remove("hidden"),e.style.borderTopColor=a,n.innerHTML=t.id,i.innerHTML=t.description},700)):(e.classList.add("active"),e.style.borderTopColor=a,n.innerHTML=t.id,i.innerHTML=t.description)},e.closeDescription=function(){document.getElementById("decription").classList.remove("active")}},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(3);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){r(this,t),this._canvas=document.getElementById("canvas"),this._buttonAddAndCrossHandler(),this._dataCollector=document.getElementById("data_container"),this._buttonSubmit()}return i(t,[{key:"_buttonAddAndCrossHandler",value:function(){document.getElementsByClassName("button_plus")[0].addEventListener("click",function(t){t.preventDefault();var e=document.getElementsByClassName("data")[0],n=document.getElementById("data_container"),i=e.cloneNode(!0);n.appendChild(i);var a=i.getElementsByClassName("cross")[0];a.addEventListener("click",function(t){a.parentElement.parentElement.remove()})})}},{key:"_buttonSubmit",value:function(){var t=this;document.getElementsByClassName("submit")[0].addEventListener("click",function(e){e.preventDefault(),t._submitHandler()})}},{key:"_submitHandler",value:function(){for(var t=document.getElementsByClassName("data"),e=[],n=!0,i=1;i<t.length;i++){var r=t[i].querySelector(".input_name input").value,o=t[i].querySelector(".input_value input").value,u=t[i].querySelector(".description textarea").value;o?(t[i].querySelector(".input_value input").classList.remove("error"),o&&e.push(new s(r,o,u))):(t[i].querySelector(".input_value input").classList.add("error"),n=!1)}if(n&&e.length>0){document.querySelector(".main_container").style.display="block",document.querySelector(".content").style.display="none";new a.PieChartController(this._canvas,e)}}}]),t}(),s=function t(e,n,i){r(this,t),this.id=e,this.value=parseInt(n),this.description=i};new o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieChartController=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(4),r=n(0),o=n(1);e.PieChartController=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=e,this._ctx=e.getContext("2d"),this._canvas.setAttribute("height",r.CANVAS_HEIGHT),this._canvas.setAttribute("width",r.CANVAS_WIDTH),this._ctx.font="10px Arial",this._canvas.addEventListener("mousedown",function(t){return i._startRecalculation(t)},!1),document.addEventListener("mouseup",function(t){return i._stopRecalculation(t)},!1),document.addEventListener("dragend",function(t){return i._stopRecalculation(t)},!1),document.addEventListener("mousemove",function(t){return i._recalculation(t)},!1),this._pieChart=new a.PieChart,this._initPieChart(n),this._initButtons();!function t(){i._pieChart.animate(i._ctx),requestAnimationFrame(t)}()}return i(t,[{key:"_initPieChart",value:function(t){for(var e=0;e<t.length;e++)this._pieChart.addItem(t[e]);this._pieChart.draw(this._ctx)}},{key:"_initButtons",value:function(){var t=this,e=document.getElementsByClassName("next")[0],n=document.getElementsByClassName("prev")[0];e.addEventListener("click",function(e){e.preventDefault(),t._pieChart.nextElem()}),n.addEventListener("click",function(e){e.preventDefault(),t._pieChart.prevElem()})}},{key:"_startRecalculation",value:function(t){this._pieChart.isRecalculation=!0;var e=(0,o.mouseCoordinates)(this._canvas,t),n=(0,o.arctg360)(e.x,e.y);this._pieChart.setCurRotation(n)}},{key:"_recalculation",value:function(t){if(1==this._pieChart.isRecalculation){var e=(0,o.mouseCoordinates)(this._canvas,t),n=(0,o.arctg360)(e.x,e.y)-this._pieChart.getCurRotation();n<0&&(n+=360),this._pieChart.setRotation((0,o.inRad)(n))}}},{key:"_stopRecalculation",value:function(t){this._pieChart.isRecalculation=!1;var e=(0,o.mouseCoordinates)(this._canvas,t),n=this._pieChart.getRotationDegree();(n<.1||n>2*Math.PI-.1)&&this._pieChart.activateElement(t,e),this._pieChart.resetRotation()}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieChart=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),r=n(5),o=n(1);e.PieChart=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=[],this._colors=["red","blue","green","darkgrey","brown","grey","yellow","pink"],this._rotationDegree=0,this.total=0,this.isRecalculation=!1,this._currentState=1.5*Math.PI,this._curRotation=0}return i(t,[{key:"addItem",value:function(t){this._items.push(new r.Item(t.value,this._colors[this._items.length%this._colors.length],this._items.length,t.id,t.description)),this.total+=t.value}},{key:"setRotation",value:function(t){this._rotationDegree=t}},{key:"getRotationDegree",value:function(){return this._rotationDegree}},{key:"resetRotation",value:function(){this._currentState+=this._rotationDegree,this._rotationDegree=0}},{key:"setCurRotation",value:function(t){this._curRotation=t}},{key:"getCurRotation",value:function(){return this._curRotation}},{key:"draw",value:function(t){var e=this;t.clearRect(0,0,a.CANVAS_WIDTH,a.CANVAS_HEIGHT),this._items.forEach(function(n,i){var a=(0,o.getItemRect)(n,e._currentState+e._rotationDegree,e.total);n.getColor()==e._colors[0]&&i==e._items.length-1&&n.setColor(e._colors[1]),n.draw(t,e._currentState+e._rotationDegree,e.total),n.start=e._currentState,e._currentState+=a.rad,e._currentState=e._currentState%(2*Math.PI),n.finish=e._currentState})}},{key:"animate",value:function(t){var e=this;this._items.forEach(function(n){var i=n.animation();i.isAnimation&&(i.animate(),e.draw(t))}),this.setRotation&&this.draw(t)}},{key:"activateElement",value:function(t,e){var n=Math.hypot(e.x,e.y);n<=a.RADIUS_CHART+a.ANIMATE_DY&&this.activateEl(n,e)}},{key:"activateEl",value:function(t,e){var n=this;this._items.forEach(function(i){i.check(t,n.total,e)&&s(n._items,i)})}},{key:"nextElem",value:function(){var t=0;this._items.forEach(function(e,n){e.isActive()&&(t=n+1)}),s(this._items,this._items[t])}},{key:"prevElem",value:function(){var t=this._items.length-1;this._items.forEach(function(e,n){e.isActive()&&(t=n-1)}),s(this._items,this._items[t])}}]),t}();function s(t,e){t.forEach(function(n,i){n.animation();var a=n.isActive();n==e?a?(n.deactivate(),(0,o.closeDescription)(),u(1,t.length-1)):(n.activate(),(0,o.showDescription)(n),u(i,t.length-1)):a&&n.deactivate()})}function u(t,e){var n=document.getElementsByClassName("prev")[0],i=document.getElementsByClassName("next")[0];0==t?(n.setAttribute("disabled","disabled"),i.hasAttribute("disabled")&&i.removeAttribute("disabled")):t==e?(i.setAttribute("disabled","disabled"),n.hasAttribute("disabled")&&n.removeAttribute("disabled")):(i.hasAttribute("disabled")&&i.removeAttribute("disabled"),n.hasAttribute("disabled")&&n.removeAttribute("disabled"))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),r=n(6),o=n(1);e.Item=function(){function t(e,n,i,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=a,this.index=i,this.value=e,this.description=o,this._color=n,this._animation=new r.Animation(this),this.start=null,this.finish=null,this._isActive=!1}return i(t,[{key:"isActive",value:function(){return this._isActive}},{key:"setActive",value:function(t){this._isActive=t}},{key:"setColor",value:function(t){this._color=t}},{key:"getColor",value:function(){return this._color}},{key:"draw",value:function(t,e,n){var i=(0,o.getItemRect)(this,e,n);t.fillStyle=this._color,t.strokeStyle="#000",t.beginPath(),t.arc(i.x,i.y,a.RADIUS_CHART,e,e+i.rad,!1),t.lineTo(i.x,i.y),t.closePath(),t.stroke(),t.fill(),function(t,e,n,i){t.textBaseline="middle",t.textAlign="center",t.fillStyle="black",t.fillText(e,n,i)}(t,Math.round(100*this.value/n)+"%",i.cx,i.cy)}},{key:"animation",value:function(){return this._animation}},{key:"activate",value:function(){this._animation.activate(),this._isActive=!0}},{key:"deactivate",value:function(){this._animation.deactivate(),this._isActive=!1}},{key:"check",value:function(t,e,n){var i=(0,o.inRad)((0,o.arctg360)(n.x,n.y));return(i>=this.start&&i<this.finish||this.start>this.finish&&(i>=this.start||i<this.finish))&&(!this.animation().isAnimation&&(this._isActive?function(t,e,n){var i=(0,o.getItemRect)(t,t.start,e),r=n.x-i.x+a.CANVAS_WIDTH/2,s=n.y-i.y+a.CANVAS_HEIGHT/2,u=Math.hypot(r,s),c=(0,o.inRad)((0,o.arctg360)(r,s));return(t.start<=c&&c<t.finish||t.start>t.finish&&(t.start<=c||c<t.finish))&&u<=a.RADIUS_CHART}(this,e,n):t<=a.RADIUS_CHART))}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0);e.Animation=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._item=e,this.currentAnimation=null,this._baseProgress=null,this._activationTimestamp=null,this._duration=null,this.isAnimation=!1,this._fnAnimate=n}return i(t,[{key:"activate",value:function(){this.createAnimation(!0)}},{key:"deactivate",value:function(){this.createAnimation(!1)}},{key:"createAnimation",value:function(t){this._baseProgress=this._item.isActive()?1-this.currentAnimation/a.ANIMATE_DY:this.currentAnimation/a.ANIMATE_DY,this._duration=a.ANIMATION_DURATION*(1-this._baseProgress),this._activationTimestamp=performance.now(),this.isAnimation=!0}},{key:"animate",value:function(){var t=performance.now();if(this._duration>0){var e=(t-this._activationTimestamp)/a.ANIMATION_DURATION;this._duration=a.ANIMATION_DURATION*(1-this._baseProgress-e);var n=e+this._baseProgress;a.ANIMATION_DURATION,this._duration,a.ANIMATION_DURATION,this._baseProgress;this.currentAnimation=this._item.isActive()?this._fnAnimate(n)*a.ANIMATE_DY:a.ANIMATE_DY-this._fnAnimate(n)*a.ANIMATE_DY}else this._duration=0,this.isAnimation=!1}}]),t}()}]);