!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=340,a=340,r=a/9,o=n<a?n/3:a/3;e.CANVAS_WIDTH=n,e.CANVAS_HEIGHT=a,e.ANIMATION_DURATION=300,e.ANIMATE_DY=r,e.RADIUS_CHART=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.closeDescription=e.showDescription=e.getItemRect=e.inDeg=e.inRad=e.mouseCoordinates=e.arctg360=void 0;var n=i(0);e.arctg360=function(t,e){return e>=0&&t>=0?180*Math.atan(e/t)/Math.PI:e>=0&&t<0||e<0&&t<0?180+180*Math.atan(e/t)/Math.PI:360+180*Math.atan(e/t)/Math.PI},e.mouseCoordinates=function(t,e){var i=t.getBoundingClientRect(),a=e.pageX-t.offsetLeft-i.left,r=e.pageY-t.offsetTop;return{x:a-n.CANVAS_WIDTH/2,y:r-n.CANVAS_HEIGHT/2}},e.inRad=function(t){return t*Math.PI/180},e.inDeg=function(t){return 180*t/Math.PI},e.getItemRect=function(t,e,i){var a=2*Math.PI*(t.value/i),r=n.CANVAS_WIDTH/2,o=(e+e+a)/2,s=t._animation.currentAnimation,u=n.RADIUS_CHART+10+s;return{rad:a,cx:r+u*Math.cos(o),cy:r+u*Math.sin(o),x:r+s*Math.cos(o),y:r+s*Math.sin(o)}},e.showDescription=function(t){var e=document.getElementById("decription"),i=document.getElementsByClassName("title")[0],n=document.getElementsByClassName("about_item")[0],a=t.getColor();e.classList.contains("active")?(e.classList.remove("active"),setTimeout(function(){e.classList.add("active"),e.style.borderTopColor=a,i.innerHTML=t.id,n.innerHTML="value: "+t.value+"<Br>"+t.description},300)):(e.classList.add("active"),e.style.borderTopColor=a,i.innerHTML=t.id,n.innerHTML="value: "+t.value+"<Br>"+t.description)},e.closeDescription=function(){document.getElementById("decription").classList.remove("active")}},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(3);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){r(this,t),this._canvas=document.getElementById("canvas"),this._buttonAddAndCrossHandler(),this._dataCollector=document.getElementById("data_container"),this._buttonSubmit()}return n(t,[{key:"_buttonAddAndCrossHandler",value:function(){document.getElementsByClassName("button_plus")[0].addEventListener("click",function(t){t.preventDefault();var e=document.getElementsByClassName("data")[0],i=document.getElementById("data_container"),n=e.cloneNode(!0);i.appendChild(n);var a=n.getElementsByClassName("cross")[0];a.addEventListener("click",function(t){a.parentElement.parentElement.remove()})})}},{key:"_buttonSubmit",value:function(){var t=this;document.getElementsByClassName("submit")[0].addEventListener("click",function(e){e.preventDefault(),t._submitHandler()})}},{key:"_submitHandler",value:function(){for(var t=document.getElementsByClassName("data"),e=[],i=!0,n=1;n<t.length;n++){var r=t[n].querySelector(".input_name input").value,o=t[n].querySelector(".input_value input").value,u=t[n].querySelector(".description textarea").value;o?(t[n].querySelector(".input_value input").classList.remove("error"),o&&e.push(new s(r,o,u))):(t[n].querySelector(".input_value input").classList.add("error"),i=!1)}if(i&&e.length>0){document.querySelector(".main_container").style.display="block",document.querySelector(".buttons").style.display="block",document.querySelector(".content").style.display="none",document.querySelector(".main_header").style.display="none";new a.PieChartController(this._canvas,e)}}}]),t}(),s=function t(e,i,n){r(this,t),this.id=e,this.value=parseInt(i),this.description=n};new o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieChartController=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(4),r=i(0),o=i(1);e.PieChartController=function(){function t(e,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=e,this._ctx=e.getContext("2d"),this._canvas.setAttribute("height",r.CANVAS_HEIGHT),this._canvas.setAttribute("width",r.CANVAS_WIDTH),this._ctx.font="10px Arial",this._canvas.addEventListener("mousedown",function(t){return n._startRecalculation(t)},!1),document.addEventListener("mouseup",function(t){return n._stopRecalculation(t)},!1),document.addEventListener("dragend",function(t){return n._stopRecalculation(t)},!1),document.addEventListener("mousemove",function(t){return n._recalculation(t)},!1),this._pieChart=new a.PieChart,this._initPieChart(i),this._initButtons();!function t(){n._pieChart.animate(n._ctx),requestAnimationFrame(t)}()}return n(t,[{key:"_initPieChart",value:function(t){for(var e=0;e<t.length;e++)this._pieChart.addItem(t[e]);this._pieChart.draw(this._ctx)}},{key:"_initButtons",value:function(){var t=this,e=document.getElementsByClassName("next")[0],i=document.getElementsByClassName("prev")[0];e.addEventListener("click",function(e){e.preventDefault(),t._pieChart.nextElem()}),i.addEventListener("click",function(e){e.preventDefault(),t._pieChart.prevElem()})}},{key:"_startRecalculation",value:function(t){this._pieChart.isRecalculation=!0;var e=(0,o.mouseCoordinates)(this._canvas,t),i=(0,o.arctg360)(e.x,e.y);this._pieChart.setCurRotation(i)}},{key:"_recalculation",value:function(t){if(1==this._pieChart.isRecalculation){var e=(0,o.mouseCoordinates)(this._canvas,t),i=(0,o.arctg360)(e.x,e.y)-this._pieChart.getCurRotation();i<0&&(i+=360),this._pieChart.setRotation((0,o.inRad)(i))}}},{key:"_stopRecalculation",value:function(t){this._pieChart.isRecalculation=!1;var e=(0,o.mouseCoordinates)(this._canvas,t),i=this._pieChart.getRotationDegree();(i<.1||i>2*Math.PI-.1)&&this._pieChart.activateElement(t,e),this._pieChart.resetRotation()}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieChart=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=i(5),o=i(1);e.PieChart=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=[],this._colors=["red","blue","green","darkgrey","brown","grey","yellow","pink"],this._rotationDegree=0,this.total=0,this.isRecalculation=!1,this._currentState=1.5*Math.PI,this._curRotation=0}return n(t,[{key:"addItem",value:function(t){this._items.push(new r.Item(t.value,this._colors[this._items.length%this._colors.length],this._items.length,t.id,t.description)),this.total+=t.value}},{key:"setRotation",value:function(t){this._rotationDegree=t}},{key:"getRotationDegree",value:function(){return this._rotationDegree}},{key:"resetRotation",value:function(){this._currentState+=this._rotationDegree,this._rotationDegree=0}},{key:"setCurRotation",value:function(t){this._curRotation=t}},{key:"getCurRotation",value:function(){return this._curRotation}},{key:"draw",value:function(t){var e=this;t.clearRect(0,0,a.CANVAS_WIDTH,a.CANVAS_HEIGHT),this._items.forEach(function(i,n){var a=(0,o.getItemRect)(i,e._currentState+e._rotationDegree,e.total);i.getColor()==e._colors[0]&&n==e._items.length-1&&i.setColor(e._colors[1]),i.draw(t,e._currentState+e._rotationDegree,e.total),i.start=e._currentState,e._currentState+=a.rad,e._currentState=e._currentState%(2*Math.PI),i.finish=e._currentState})}},{key:"animate",value:function(t){var e=this;this._items.forEach(function(i){var n=i.animation();n.isAnimation&&(n.animate(),e.draw(t))}),this.setRotation&&this.draw(t)}},{key:"activateElement",value:function(t,e){var i=Math.hypot(e.x,e.y);i<=a.RADIUS_CHART+a.ANIMATE_DY&&this.activateEl(i,e)}},{key:"activateEl",value:function(t,e){var i=this;this._items.forEach(function(n){n.check(t,i.total,e)&&i._processElementClick(i._items,n)})}},{key:"nextElem",value:function(){var t=this,e=0;this._items.forEach(function(i,n){i.isActive()&&(e=n==t._items.length-1?0:n+1)}),this._processElementClick(this._items,this._items[e])}},{key:"prevElem",value:function(){var t=this,e=this._items.length-1;this._items.forEach(function(i,n){i.isActive()&&(e=0==n?t._items.length-1:n-1)}),this._processElementClick(this._items,this._items[e])}},{key:"_processElementClick",value:function(t,e){t.forEach(function(t,i){t.animation();var n=t.isActive();t==e?n?(t.deactivate(),(0,o.closeDescription)()):(t.activate(),(0,o.showDescription)(t)):n&&t.deactivate()})}},{key:"_disableButtons",value:function(t,e){var i=document.getElementsByClassName("prev")[0],n=document.getElementsByClassName("next")[0];0==t?(i.setAttribute("disabled","disabled"),n.hasAttribute("disabled")&&n.removeAttribute("disabled")):t==e?(n.setAttribute("disabled","disabled"),i.hasAttribute("disabled")&&i.removeAttribute("disabled")):(n.hasAttribute("disabled")&&n.removeAttribute("disabled"),i.hasAttribute("disabled")&&i.removeAttribute("disabled"))}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0),r=i(6),o=i(1);e.Item=function(){function t(e,i,n,a,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=a,this.index=n,this.value=e,this.description=o,this._color=i,this._animation=new r.Animation(this),this.start=null,this.finish=null,this._isActive=!1}return n(t,[{key:"isActive",value:function(){return this._isActive}},{key:"setActive",value:function(t){this._isActive=t}},{key:"setColor",value:function(t){this._color=t}},{key:"getColor",value:function(){return this._color}},{key:"draw",value:function(t,e,i){var n=(0,o.getItemRect)(this,e,i);t.fillStyle=this._color,t.strokeStyle="#000",t.beginPath(),t.arc(n.x,n.y,a.RADIUS_CHART,e,e+n.rad,!1),t.lineTo(n.x,n.y),t.closePath(),t.fill(),function(t,e,i,n){t.textBaseline="middle",t.textAlign="center",t.fillStyle="black",t.fillText(e,i,n)}(t,Math.round(100*this.value/i)+"%",n.cx,n.cy)}},{key:"animation",value:function(){return this._animation}},{key:"activate",value:function(){this._animation.activate(),this._isActive=!0}},{key:"deactivate",value:function(){this._animation.deactivate(),this._isActive=!1}},{key:"check",value:function(t,e,i){var n=(0,o.inRad)((0,o.arctg360)(i.x,i.y));return(n>=this.start&&n<this.finish||this.start>this.finish&&(n>=this.start||n<this.finish))&&(!this.animation().isAnimation&&(this._isActive?function(t,e,i){var n=(0,o.getItemRect)(t,t.start,e),r=i.x-n.x+a.CANVAS_WIDTH/2,s=i.y-n.y+a.CANVAS_HEIGHT/2,u=Math.hypot(r,s),c=(0,o.inRad)((0,o.arctg360)(r,s));return(t.start<=c&&c<t.finish||t.start>t.finish&&(t.start<=c||c<t.finish))&&u<=a.RADIUS_CHART}(this,e,i):t<=a.RADIUS_CHART))}}]),t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(0);e.Animation=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._item=e,this.currentAnimation=null,this._baseProgress=null,this._activationTimestamp=null,this._duration=null,this.isAnimation=!1,this._fnAnimate=i}return n(t,[{key:"activate",value:function(){this.createAnimation(!0)}},{key:"deactivate",value:function(){this.createAnimation(!1)}},{key:"createAnimation",value:function(t){this._baseProgress=this._item.isActive()?1-this.currentAnimation/a.ANIMATE_DY:this.currentAnimation/a.ANIMATE_DY,this._duration=a.ANIMATION_DURATION*(1-this._baseProgress),this._activationTimestamp=performance.now(),this.isAnimation=!0}},{key:"animate",value:function(){var t=performance.now();if(this._duration>0){var e=(t-this._activationTimestamp)/a.ANIMATION_DURATION;this._duration=a.ANIMATION_DURATION*(1-this._baseProgress-e);var i=e+this._baseProgress;a.ANIMATION_DURATION,this._duration,a.ANIMATION_DURATION,this._baseProgress;this.currentAnimation=this._item.isActive()?this._fnAnimate(i)*a.ANIMATE_DY:a.ANIMATE_DY-this._fnAnimate(i)*a.ANIMATE_DY}else this._duration=0,this.isAnimation=!1}}]),t}()}]);